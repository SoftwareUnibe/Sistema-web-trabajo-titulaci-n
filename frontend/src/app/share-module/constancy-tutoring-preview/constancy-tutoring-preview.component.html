<div class="tutoring_container flex" *ngIf="show">
    <p-dialog header="Vista Previa" [(visible)]="showTutoringContancy" [breakpoints]="{'960px': '75vw'}"
        [style]="{width: '50vw'}" [modal]="true" [draggable]="false" [resizable]="false"
        (onHide)="closeTutoringConstancy()" [closeOnEscape]="false">
        <p-card class="col-8" *ngIf="students">
            <ng-template pTemplate="header">
                <app-documents-header documentTitle="CONSTANCIA DE CUMPLIMIENTO DE TUTORÍAS" formNumber="009"></app-documents-header>
            </ng-template>
            <ng-template pTemplate="content">
                <div class="flex justify-content-end mb-2">
                    <p>Quito, {{actualDate}}</p>
                </div>
                <div class="flex flex-column justify-content-start align-items-start mt-2 mb-2">
                    <p class="mb-2 text-justify line-height-3">En referencia al proceso de acompañamiento que debe
                        otorgarse al estudiante durante
                        la elaboración del proyecto de 
                    </p>
                    <p class="mb-2 text-justify font-semibold line-height-3">
                        <span>{{students[0].topic.articulation}}</span>
                    </p>
                    <p class="mb-0 text-justify line-height-3">Informo como tutor(a) <span *ngIf="students.length===2">de los estudiantes: </span>
                        <span *ngIf="students.length===1">del estudiante: </span>  
  
                    </p>
                    <p *ngFor="let student of students;let i = index;">
                       {{student.student.name + " " + student.student.lastName}}<span *ngIf="i==students.length-2"></span><span *ngIf="i==students.length-1"></span>
                    </p>
                    <p class="mt-2">
                        <span class="font-semibold ">Facultad: </span><span>{{students[0].topic.career.faculty.name}}</span>
                    </p>
                    <p class="mt-2">
                        <span class="font-semibold ">Carrera: </span><span>{{students[0].topic.career.name}}</span>
                    </p>
                    <p class="mt-2">
                        <span class="font-semibold ">Perido académico: </span><span *ngFor="let tutoring of letPeriodArray(tutoringList);let i = index;">
                            {{tutoring}}<span *ngIf="i==letPeriodArray(tutoringList).length-2"> y</span><span *ngIf="i==letPeriodArray(tutoringList).length-1">.</span>
                        </span>
                    </p>
                    <p class="mb-2 mt-2 text-justify line-height-3">
                        Se ha cumplido con las horas de tutorías descritas a continuación, que garantizan el desarrollo de la investigación garantizando su profundidad, consistencia y cumplimiento de las normas de estilo establecidas por la Universidad Iberoamericana del Ecuador. 
                    </p>
                    <p class="mt-2 mb-2">A continuación, se detalla el proceso de tutoría realizado:
                    </p>
                </div>
                <div class="flex table-container mt-3 mb-3 justify-content-center">
                    <table class="default">
                        <thead>
                            <tr style="background-color: #d9d9d9;">
                                <th style="width: 10%;">N°</th>
                                <th style="width: 40%;">Actividad</th>
                                <th style="width: 30%;">Fecha</th>
                                <th style="width: 20%;">Horas de tutoria</th>
                            </tr>
                        </thead>
                        <tbody >
                            <tr *ngFor="let tutoring of tutoringList; let i = index;">
                                <td class="text-center">{{tutoring.number}}</td>
                                <td class="text-justify">{{tutoring.activity}}</td>
                                <td class="text-center">{{formatDate(tutoring.date)}}</td>
                                <td class="text-center">{{tutoring.hours}}</td>
                            </tr>
                        </tbody>
                        <tbody>
                            <tr>
                                <td colspan="3" class="text-center">Total de horas de tutorias</td>
                                <td colspan="1" class="text-center">{{getTotalHours(tutoringList)}}</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <div class="grid mt-3 justify-content-center justify-content-between">
                   <div class="flex flex-column justify-content-between col-4 mt-2 h-10rem">
                    <span class="font-semibold">Elaborado por:</span>
                    <div class="flex flex-column">
                        <span>____________________</span>
                        <span>Tutor</span>
                    </div>
                   </div>
                   <div class="flex flex-column justify-content-between col-4 mt-2 h-10rem">
                    <span  class="font-semibold">Revisado por:</span>
                    <div class="flex flex-column">
                        <span>____________________</span>
                        <span>Director(a) de carrera</span>
                    </div>
                   </div>
                   <div class="flex flex-column justify-content-between col-4 mt-2 h-10rem">
                    <span  class="font-semibold">Aprobado por:</span>
                    <div class="flex flex-column">
                        <span>____________________</span>
                        <span>Decano(a) de la facultad</span>
                    </div>
                   </div> 
                </div>
            </ng-template>
        </p-card>
        <ng-template pTemplate="footer">
            <p-button (click)="closeTutoringConstancy()" label="Cerrar" styleClass="p-button-text"></p-button>
        </ng-template>
    </p-dialog>
</div>